### 목차

- [**2023-07-17**](#2023-07-17)
  - [스크럼회의(2023/07/17)](#스크럼회의20230717)
- [기획 회의(주제 변경) (2023/07/17)](#기획-회의주제-변경-20230717)
  - [최종 결정](#최종-결정)
  - [1. **지하차도**](#1-지하차도)
  - [2. **건물**](#2-건물)
    - [기능 명세서 수정](#기능-명세서-수정)
- [**2023-07-18**](#2023-07-18)
  - [스크럼 회의](#스크럼-회의)
  - [1. DB 네이밍 컨벤션션](#1-db-네이밍-컨벤션션)
  - [ERD 설계](#erd-설계)
  - [ERD 1차 피드백](#erd-1차-피드백)
    - [기획 피드백](#기획-피드백)
    - [ERD 피드백](#erd-피드백)
- [**2023-07-19**](#2023-07-19)
  - [스크럼회의(2023/07/19)](#스크럼회의20230719)
  - [2023-07-19 회의](#2023-07-19-회의)
    - [IoT 관련](#iot-관련)
    - [설계](#설계)
  - [2차 ERD 피드백 요약](#2차-erd-피드백-요약)
    - [회원](#회원)
    - [아파트](#아파트)
    - [게시판](#게시판)
    - [지하차도](#지하차도)
    - [iot](#iot)
    - [시설](#시설)
    - [알림 log](#알림-log)
  - [2차 피드백 후 ERD](#2차-피드백-후-erd)
- [**2023-07-20**](#2023-07-20)
  - [스크럼회의(2023/07/20)](#스크럼회의20230720)
  - [일정](#일정)
  - [1차 목업 산출물](#1차-목업-산출물)
    - [초기 화면](#초기-화면)
    - [대시보드](#대시보드)
    - [제어페이지](#제어페이지)
    - [관리페이지](#관리페이지)
    - [시스템 로그](#시스템-로그)
    - [신고 접수](#신고-접수)
    - [알림함](#알림함)
- [**2023-07-21**](#2023-07-21)
  - [할 일 리스트 관련 회의](#할-일-리스트-관련-회의)
  - [**개발환경 세팅**](#개발환경-세팅)
  - [git flow \& git convention](#git-flow--git-convention)
  - [목업 작업 마무리](#목업-작업-마무리)
    - [대시보드](#대시보드-1)
    - [신고접수](#신고접수)
    - [제어](#제어)
    - [시스템 로그](#시스템-로그-1)
    - [관리](#관리)
    - [로그인 \& 회원가입](#로그인--회원가입)
    - [알림함](#알림함-1)
- [**2023-07-24**](#2023-07-24)
  - [스크럼회의(2023/07/24)](#스크럼회의20230724)
  - [Vue 컴포넌트 구조 설계](#vue-컴포넌트-구조-설계)
  - [프론트 기능분업](#프론트-기능분업)
  - [JIRA 스프린트 작성](#jira-스프린트-작성)
  - [API 명세서 작성](#api-명세서-작성)

<br>

# **2023-07-17**

## 스크럼회의(2023/07/17)

- 기존 서비스를 지하차도에 적용하자는 의견 나옴.
- 건물의 범위를 넓히는 서비스를 한다면 괜찮지만 아예 바꿔야 하는 건 어려울 것 같다.
- 온습도, 미세먼지 줄이고 침수관리 쪽으로 초점
  ⇒ 건물(지하주차장)관리, 지하차도 관리
- 운전자들은 웹사이트를 통해 정보를 조회할 수 있게
- 지하차도에 실제 설치하기는 힘들지만 설치한다는 가정으로 차수판을 활용하자.
- 지자체 대상 추가
  - 지도 어플을 하나 넣는 형식으로 실시간 댐 api를 활용하여 지도에 위험지역 표기해주는 기능
  - LED판에 미세먼지, 침수 경보 등 정보 표시
  - 앞에서 차단을 해준다는것이 차이점(입구에서 안들어가게만 하도록 해도 피해를 줄일 수 있음)
  - 차수판 설치 하고 사이렌 울림(물을 늦출 수 있음) + TTS - 현장 제제 목적

<br>

- 지자체와 기존 건물 관리의 통일성 문제
  - 알림을 서브로 가져가는 건?
  - 지하주차장 → 차수판 올라감 / 지하차도 → 사이렌 / 사이렌 → 지자체 알림 → 차수판 올림

<br>

- 사용자 없애고 재난 대비로 가는 것은?
- 사용자는 있어야 될것 같고 미세먼지와 같은 정보는 지자체가 관리하는 데이터인데 의미가 있을까?
- 입주민 없애고 세대 정보 알고 있고 알림을 주는것
- 지하차도는 차수판과 경고만
- 사용자를 없애고 지자체에게 알림
- 입주민 없애고 건의사항 대신 신고 접수
- 지자체 번호로 보내는 느낌
- 서비스의 볼륨이 없어짐.
- 건물 관리자 측면은 유지,

- 맥락을 벗어남. 대시보드 부실하다고 느끼면,
- 아파트회원 지자체 회원 → 공통 cctv 방송 알림 등
- 어떻게 갈리냐? 온습도 미세먼지 없애고 여러개를 관리하는 느낌으로
- 지자체라 함은 재난대비
- 전국에 있는 현황을 확인하며 통솔하는 입장
- cctv 여러개 봐야함.
- 지하차도 별로 알림이 올 것
- cctv 수치 원격제어 기능
- 신고페이지 괜찬
- 건의사항 빼고 할거면 주민 가입 x 주민 정보 가져오는 방법 다르게 또는 임의로 넣는다고 생각(알림용)

- 정보 제공 받은 입장
- 사용자 입장에서는 gps로 받는게 더 효율적
- 관리자 입장에서는 cctv 활용 할 것 , 진입 차단 시설 → 터널, 지하차도 일부 설치 된 바 있음 → 웹사이트 간단 조작. 제어 기기 있음. → 정보 제공 측면에서 하는 것이 좋을 듯 하다.

<br>

# 기획 회의(주제 변경) (2023/07/17)

1안 : 기존 현행 유지(건물관리만)

2안 : 건물 + 지하차도 (재난 전부)

3안 : 지하차도만

4안 : 건물 + 지하차도 (침수 포커스)

5안 : 건물 + 지하차도 (관리인만)

### 최종 결정

**4안 : 건물 + 지하차도 (침수 포커스)**

## 1. **지하차도**

- 구역 선택 (목록은 서비스 운영자가 제공한다고 가정?)
  - 메인 배너 바로 밑에 위치

<br>

- 지하차도 대시보드(일반인+관리인)

    <img src="/img/지하차도_대쉬보드.jpg" width="600" height="400"/>

  - CCTV(목록에서 선택)
  - 지도(지하차도 좌표 + 하천수위)
  - 신고접수 현황 ⇒ 이것만 일반인 상세 이동. (관리자도 상세 이동 가능)
  - 시간별 침수 높이(그래프)
  - 강수량 데이터(그래프?)
  - 관리자만 제어페이지(상세페이지로 이동, 신고접수만 게시판 나머지는 제어페이지로))
  - 차수판 동작여부(상단 배치)

    <br>

- 신고접수 게시판(일반인+관리인)

    <img src="/img/지하차도_신고접수.jpg" width="600" height="400"/>

  - (초록 또는 파랑) 공지사항
  - 일반인 신고접수
  - 글쓰기 버튼
  - 글쓰기 ⇒ 사진 첨부 기능
  - 수정, 삭제 (같은 휴대폰 번호 입력하면 가능)

    <br>

- 제어 페이지(관리인)

    <img src="/img/지하차도_제어.jpg" width="600" height="400"/>

  - CCTV 2개 (입구 + 내부)
  - 경고등
  - 차수막, 사이렌 동작 버튼
  - TTS
  - 1차 경고등 동작은 자동으로 할 것인가 ? : 일단 자동 아닌 것으로 하기 (추후 바뀔 가능성O)

    <br>

- 시스템

    <img src="/img/지하차도_시스템.jpg" width="600" height="400"/>

  - 일자 선택 (기간) 디폴트는 오늘날짜
  - 세부 테이블 선택
  - 조회하고 싶은 내용 선택 (센서 정보 / 사이렌 동작여부 / TTS 동작여부 / 차수 동작 여부/알림 기록)
  - 수신 알림 내역(이력) (센서 관련 정보와 메뉴 분리, 건물 관리와 ui 동등하게 진행)

<br>

- 알림함
  - 페이지 상단 종모양.!!
  - 건물 관리랑 동등하게 ui 진행

<br>

- 관리
  - 기준치 설정과 메시지 문구(TTS)를 한 화면에 배치

## 2. **건물**

- 대시보드(관리인 + 입주민)

    <img src="/img/건물_대쉬보드.jpg" width="600" height="400"/>

  - CCTV
  - 수위 그래프
  - 강수 그래프
  - 실시간 온습도 / 미세먼지
  - 신고현황
  - 관리자공지
  - 특보(비 관련만)
  - 차수판 동작여부(상단 배치)

<br>

- 건의사항 → 신고 접수(관리인 + 입주민)
  - 기능 명세서 용어 수정하기

<br>

- 제어 (+ 알림 통합)(관리인)

    <img src="/img/건물_제어.jpg" width="600" height="400"/>

  - CCTV
  - 차수판 동작
  - TTS, 앱, 문자메시지 알림 보내기

<br>

- 시스템(관리인)

    <img src="/img/건물_시스템.jpg" width="600" height="400"/>

  - 일자 선택 (기간) 디폴트는 오늘날짜
  - 세부 테이블 선택
  - 조회하고 싶은 내용 선택 로그(센서 정보 / 사이렌 동작여부 / TTS 동작여부 / 차수 동작 여부) ,알림(수신 알림 기록, 발신 알림 기록)
  - 유용한 로그(통합 테이블) → 좀 더 고민 해보기

<br>

- 관리(관리인)

    <img src="/img/건물_관리.jpg" width="600" height="400"/>

  - 메시지 문구 설정(TTS, 문자, 앱 알림)
  - 기준치 설정(1차 경고, 2차 경고)
  - 입주민 관리(위 2개랑 탭 따로)

<br>

- 건물 / 지하차도 어떻게 구별? 지급된 관리자 계정으로 구별한다고 가정

    <img src="/img/지하차도_건물_로그인선택.jpg" width="600" height="400"/>

<br>

### 기능 명세서 수정

- **관리, 알림, 대시보드**<br>
  ![기능명세서_관리__알림__대시보드_](/uploads/098753825351e23e6e8bdf86148b57d9/기능명세서_관리__알림__대시보드_.PNG)
- **신고접수, 마이페이지**<br>
  ![기능명세서_신고접수__IOT__마이페이지_](/uploads/24050cac74bf8b52ba37f1d394afc20f/기능명세서_신고접수__IOT__마이페이지_.PNG)
- **시스템페이지, 자동알림, 제어**<br>
  ![기능명세서_시스템페이지__자동알림__제어_](/uploads/d7a5447af5d67e2dac6562d15cbebb6b/기능명세서_시스템페이지__자동알림__제어_.PNG)
- **로그인, 회원가입, 로그아웃, 알림함**<br>
  ![기능명세서_로그인__회원가입__로그아웃__알림함_](/uploads/8357cc2d74f9bba2eb2f1946ad67af06/기능명세서_로그인__회원가입__로그아웃__알림함_.PNG)

<br><br>

# **2023-07-18**

<br>

## 스크럼 회의

- 코드 컨벤션 (30분 내외)
- 테이블 전체 초안
- 15~16시 컨설턴트님 컨설팅
- 17시 1차 수정
- 프론트 회의
  - 디자인 컨셉 잡기

## 1. DB 네이밍 컨벤션션

- 대/소문자 정하기
  - 테이블 : camelCase
  - 컬럼 : snake_case
  - 접두사, 접미사 , ‘\_’, ‘TB’ 금지
- 기본 PK & 외래키 양식
  - [table명]\_id (ex) table_id)
- 약어 금지
- 단수형 사용(복수형 금지)
- index이름
  - [table명]_idx_[column명] (ex ) person_idx_column명)
- 복합키
  - [테이블명]\_pk
- 이름은 명사로

<br>

## ERD 설계

tts / 알림내역(수신,발신) / 제어 / 알림메시지 커스텀 테이블 / 게시판 (공지, 신고) / 사이렌 / 경고로그 / 차수판 동작여부/

- 각자 기능별로 테이블을 맡아서 짜오고 합치기
- 조준희, 김예진 : 측정 데이터(센서, 차수판, 사이렌) 로그 테이블
- 이효경 : 회원, 인증,
- 김동현 : 게시판 (공지, 신고)
- 황윤영 : 알림내역(수신,발신)
- 황종인 : TTS, 알림 커스텀

![1](/uploads/32a676de5241853e7811c6868fc5b29d/1.PNG)
<br>

## ERD 1차 피드백

### 기획 피드백

- 접속한 유저가 어느 지역에 속해있는지 어떻게 구분

  지역을 선택하고 들어가는지, 위치정보를 활용할 것인지

  → **사용자 GPS 위치 기준으로 지도 좌표 잡아주는 것을 활용**

- 지자체의 관리자는 관리 지역에 대해서만 제어하는 버튼이 나오도록
  도단위 지차체 or 시단위 지자체?
  검색시 내 지역에 대해서만 권리를 줘야 한다.
  → 검색은 가능하나, 관할 지자체의 지하차도만 제어 버튼이 보인다.

- 시민이 접속을 했을 때 보고 싶은 지역을 어떻게 검색할 것인지
  → 현재 위치 기반 n km 이내?

- 사이렌은 잘 안 들릴 수 있으니 LED 활용 좋은 것 같다.
  → 전광판 활용

---

<br>

### ERD 피드백

> **코드 컨벤션 / 전체 테이블**

- 테이블명도 snake case (안되는건 아니지만 일반적으로 통일)
- date 예약어 사용 금지
- autoincrement같은건 코멘트에 안적어도 된다.
- id보다는 구별가능한 이름을 써라. → jpa적용할거면 고려만!
- pk에 bigint 사용할 필요 없다.
- 권한에 시스템 계정도 추가?
  - 시스템 여부로 확인할 수도 있음
- 외래키는 안쓰는걸 추천. 시스템인지 아닌지 확인하는 boolean 하나를 사용하는걸 추천.

> **회원**

- bigint는 길이 없음 - mysql기준 통일
- 전화번호 varchar(11)
- 탈퇴처리
  - 몇번 회원인지는 남겨놓고 개인정보는 다 지우는 방법
  - 회원을 지우는 경우 회원이 했던 모든 정보가 지워짐
- 아파트랑 지자체는 가지고 있어야 할 정보가 달라서 나눌 것 같다
- 이 회원이 어디 아파트 사람인지 어떻게 구별? 시설id → 위험하다. 지하차도의 경우 유저와 시설 관계는 어떻게?
  [아파트]
  회원:아파트 다:1
  [지자체]
  관리자:지역 1:1
  한 지역에 여러개의 지하차도
- 탈퇴의 경우도 생각해야 됨
  → 지울 경우 모든 정보를 삭제하는 것이 아님
  → 개인 정보만 테이블에서 없애고 번호만 남긴다 → 몇 호에 살던 몇 번 회원
- id보다 seq - 이건 필수는 아님
- 로그인 타입 - 다시 고민 , 구현 고민
- 유저 테이블에는 가입 일시, 상태, 탈퇴 여부 등 있어야함

> **신고접수**

- 신고 대상에 해당하는 카테고리(어느 시설, 어느 터널인지)
- 신고를 어디에 전달할 것인지
  → 지역을 어디로 보낼 것인지(주소 or 선택)
- 회원 여부 , 비회원에 대한 정보가 있어야 됨

> **알림로그**

- member_id1 → receive_member 구체적으로 알아보기 쉽게

> **시설**

- 아파트 여부 isApart (boolean) 활용 ?
- 지하 차도의 위치도 가지고 있어야 함(아파트는 주소로 구분 가능하지만, 지하 차도는 어떻게?)
- 시설은 지역 코드도 있어야 함.

> **알림**

- 문자는 누구한테 보냈는지가 남아있어야 함
  문자로그도 따로 있으면 (비용이 드는 데 나갔는지 안나갔는지 확인할 수 있음.)
  → 문자 전송 로그 필요
- 웹은 받았는지 안받았는지 확인할 수 있고 사용자가 받을 수 있는 알림

- 차수판, 사이렌 작동에 대한 정보가 알림메시지에 포함되어야 함

- 그 외에는 시스템 로그

  → 다른 타입의 기록이니 나누어야 한다.

  → 읽은 여부와 읽은 시간도 들어가야 된다.

- 침수단계 2단계밖에 없는데 typeint나 char 활용하는 것이 좋을 것 같다
- 기기구분, 알림출처,
  - 한글로 하기보다는 코드화 (공통 코드 테이블로 빼기)
  - 남/여 와 같이 절대 안바뀌는 건 하드코딩 해도 괜찮다

> **기기관리**

- 센서가 많아질 경우 코드 테이블을 만들어 관리함.(센서의 이름을 한글로 잘 가지는 않음)
- 센서가 정해져 있으니 기기 관리 테이블 제거 후 센서 로그에서 건물 번호로 조회

> **결론**

- 열심히 짠건 보이지만 비슷한걸 너무 합쳐서 복잡도가 높고 직관성이 떨어질 수 있다. 반정규화 처럼 필요하다면 똑같은 테이블도 나누는걸 고민해보기.
- 공통 코드 테이블. 기기 등록 페이지가 있다면 하드코딩 줄이기 위해 이런 류는 공통 코드 그룹 테이블을 만든다.

---

# **2023-07-19**

## 스크럼회의(2023/07/19)

**오늘 일정**

- 프론트 - 피그마 컴포넌트 나머지 작업
- 백엔드 - ERD 피드백 수정

- **오늘 컨설턴트님 2차 상담 15:00**

**공통 README 작성**

- 월 : 김동현
- 화 : 이효경
- 수 : 김예진
- 목 : 황종인
- 금 : 황윤영

**논의 사항**

- 지자체 단위의 지하차도 어떻게 할것인가?
  - 대전광역시는 지하차도 데이터가 없는 수준. 직접 넣는 방법 고려중.
- 지역 하나로 한정을 할 것인가?
  - 일단 대전으로 확정하고 API 더 찾아보기. 없으면 만드는 방법도 고려.

## 2023-07-19 회의

### IoT 관련

> 1.  사이렌을 어떻게 할 예정인가? 가장 간단하게 만든다면 LED에 부저로 소리내는 정도이며, 현재 보유한 LED 중 가장 큰 사이즈는 손톱정도 크기

-> 알림 방식 변경으로 해결

> 2.  최종적으로 카메라는 몇개가 필요한 것인가?, 최소 2개가 필요하다고 생각되는데 맞는가?

-> 지하차도/지하 주차장 2개씩 4개 필요, 비싸지 않을 경우 추가 구매, 아닐경우 다른 방식으로 해결

> 3. 차단바는 어떻게 제작해야 되는가? 모터 추가 구매와 관련(모터+모터드라이버)

-> led 알림과 전광판으로 알림방식 변경으로 해결

> 4. 전광판이 있단 소리를 들었는데 이건 어느정도로 생각하는가, 가장 간단한 방법은 손가락 두개 크기의 LCD화면에 띄우는 방식

-> 태블릿 또는 기존 키트 활용

> 5. 기존 방식은 WiFi 사용, 그러나 지하차도의 경우 도로 위이다 보니 wifi가 적합하지 않다고 생각됨, 바꿀 경우 적합한 통신은 LoRa 통신이 적합하다고 생각하는데 각자의 의견은?

-> 무선통신으로 해도 된다고 생각

> 6. 미세먼지센서 배송옴

### 설계

> 1. 검색을 시도 / 구군 이런식을 구성하면 지하차도가 각각 시도 구군 동에 대한 정보를 가지고 있어야 하는데 , 지하차도 데이터를 어떻게 가져오고 구성할건지?

- 대전지역 : 수작업 일부
- 대전, 타지역 1개만으로

- 강물 수위 → 데이터 찾아보고 결정
  > 2. 알림 단순화 구체적인 논의 필요

**지하 차도 대응**

- 1차 - 침수 위험 → led, 화면
- 2차 - 진입 금지 → led, 화면, 경고등
- 내리는 거 버림
- TTS 기능 삭제

**아파트**

- 아파트 스피커에 연결되어 TTS

> 3. 입주민, 관리자 로그인 후 지하차도 접속

    → 메인페이지 내에서 상위 탭으로 이동할 수 있도록 한다. (토글처럼)

    → 아파트 회원은 지하차도 신고 접수에서 이름과 휴대폰 번호가 자동으로 입력되어 있다.

    → 상단의 회원은 전환시에도 유지

**지하 차도 기능 추가**

- gps기능 추가

## 2차 ERD 피드백 요약

### 회원

    - 아파트 관리자 회원 휴대전화번호 등록

### 아파트

    - 아파트 어느지역인지 알아야 함. 강수량, 날씨 표기에 쓸 용도

### 게시판

    - 공지글/신고글 나누어야 됨.

### 지하차도

    - 시설명(지하차도 이름) 필요

### iot

    - 센서 종류를 코드테이블로 할 것 같음.

### 시설

    - 기존 방식 유지해주어도 되나 Front End에서 요청시 구분하여 주는것에 유의(지하차도/아파트)

### 알림 log

    - Q. 시설 id 에서 관리자 계정을 찾아가는 과정이 복잡한건 아닌지?
        - A. 찾아가는 데에 도움이 되도록 아파트 여부 필드를 우선 넣어놓음
        -  상위 피드백에서 해결. is_apart 놓기
    - Q. tts와 문자를 알람 로그에서 제외하고 보니 알람로그의 복잡도가 많이 축소된 느낌.
    안 나누고 합쳐도 괜찮은가?
      - A. ok
    - Q. 외래키 연결 관련해서 조언?
        - 외래키는 제약 조건
        - 부모 테이블에 값이 있어야 하기 때문에 부모테이블을 지울 때 문제가 생길 수 있음.
        - 데이터가 경직된 느낌이 되어 건드리기가 쉽지 않음.
        - 사실 외래키는 현업에서 사용하지 않음. 논리적으론 써놓고 물리적으론 안만듦.
        - 금융 쪽처럼 때려죽어도 데이터가 정확해야하는 경우가 아니면 잘 안 씀.

- 뷰 관련
  - 여러 테이블의 것을 한꺼번에 볼 수 있는 것.
  - 뷰를 만들어 놓으면 조인 자체를 뷰로 할 수 있음.
  - 조회측면에서 복잡도 줄일수 있어 일정 부분 뷰 추천

## 2차 피드백 후 ERD

  <img src="/img/230719ERD.PNG" width="800" height="600"/>

---

# **2023-07-20**

## 스크럼회의(2023/07/20)

## 일정

~ 1000 ERD 마무리
이후 ~ 목업 제작

오전 목업 컴포넌트 등 리소스 확인

오후 페이지 나눠서 제작

21일

오전 - 개발환경 세팅

오후 - 목업 만들기?

## 1차 목업 산출물

### 초기 화면

<img src="/img/초기화면.png" width="800" height="600"/>

### 대시보드

<img src="/img/대시보드.png" width="800" height="600"/>

### 제어페이지

<img src="/img/제어페이지(지하주차장).png" width="800" height="600"/>
<img src="/img/제어페이지(지하차도).png" width="800" height="600"/>

### 관리페이지

<img src="/img/메시지, 기준치 설정.png" width="800" height="600"/>

### 시스템 로그

<img src="/img/시스템 로그.png" width="800" height="600"/>
<img src="/img/시스템 로그2.png" width="800" height="600"/>
<img src="/img/시스템 로그3.png" width="800" height="600"/>

### 신고 접수

<img src="/img/신고접수 1.png" width="800" height="600"/>
<img src="/img/신고접수 2.png" width="800" height="600"/>
<img src="/img/신고접수1.png" width="800" height="600"/>
<img src="/img/신고접수2.png" width="800" height="600"/>
<img src="/img/신고접수3.png" width="800" height="600"/>

### 알림함

<img src="/img/알림함.png" width="800" height="600"/>

# **2023-07-21**

### 할 일 리스트 관련 회의

- api 명세 : 하나도 되지 않아서 빨리 해야함. notion에 문서 양식 작성 완료. 상태코드까지 다 ? !
  - 요청 보낼 때 PathVariable 선호
  - 개발 들어가기 전에 반드시 완료해야 함 !!
  - 다음 주 월요일 진행 예정
- 개발환경 세팅
- git flow
- code convention
- 목업 완성

  ### **개발환경 세팅**

| 설치 프로그램                                          | 황윤영 | 김동현 | 황종인 | 김예진 | 조준희 | 이효경 |
| ------------------------------------------------------ | ------ | ------ | ------ | ------ | ------ | ------ |
| JDK 11.0.8                                             | o      | o      | o      | o      | o      | o      |
| MySQL                                                  | o      | o      | o      | o      | o      | o      |
| IntelliJ                                               | o      | o      | o      | o      | o      | o      |
| VScode                                                 | o      | o      | o      | o      | o      | o      |
| node.js (18.17.0) ⇒ cmd 에서 npm help 로 설치 확인하기 | o      | o      | o      | o      | o      | o      |
| Postman                                                | o      | o      | o      | o      | o      | o      |
| vue.js.devtools(mm url)                                | o      | o      | o      | o      |        | o      |
| vue                                                    | o      | o      | o      | o      |        | o      |
| DB Tool(선택)                                          | o      | o      | o      | o      | o      | o      |
| typescript(설명 하단 참고)                             | o      | o      | o      | o      |        | o      |
|                                                        |        |        |        |        |        |        |

- Postman
- MySQL
- JDK는 효경님이 배포
- DBMS 워크벤치는 각자 쓰고 싶은 것 쓰기
- intellij
- vscode
- vue

  - npm 설치 확인 : npm help
  - node.js 환경변수 설정

  - cli 설치 : `npm install -g @vue/cli@4.5.13`
  - / 에러 난다면 `sudo npm install -g @vue/cli`
  - 버전 확인 : vue --version
  - vsCode 확장프로그램
    - vetur
    - vue3 snippets

- typescript
  - `npm install -g typescript`

## git flow & git convention

- master(서버 배포용)
- develop
- backend
- frontend
- Rule
  - back / front에서 1주일동안 작업
  - 1주일에 한 번 develop에 병합 후 동작 확인
  - develop 에는 절대 올리면 안됨.
  - 각 back, front에서 각 담당자들은 기능을 담당하여 그 안에서 branch 내에서 feature\_기능명 을 branch 명으로 하여 만들어 front or back으로 합치기 .
  - 구현한 feature 가 잘 작동한다면 1주일에 한번 develop에 pull request (frontend와 backend 병합)
  - 기능명이 띄어쓰기가 있다면 ‘-’ 로 연결하기
  - develop에서 문제가 없다면 master에 올리기

## 목업 작업 마무리

### 대시보드

<img src = "/img/최종 목업/">

![대시보드_지하주차장(관리인)](</img/최종%20목업/대시보드%20-지하주차장(관리인)%20.png>)

![대시보드_지하주차장(입주민)](</img/최종%20목업/대시보드%20-지하주차장(입주민)%20-1.png>)

![대시보드_지하주차장(관리인)](</img/최종%20목업/대시보드%20-지하주차장(입주민)%20.png>)

![대시보드_지하주차장(관리인)](</img/최종%20목업/대시보드%20-지하차도(비회원)%20-1.png>)

![대시보드_지하주차장(관리인)](</img/최종%20목업/대시보드%20-지하차도(비회원)%20-2.png>)

### 신고접수

![신고접수_목록](</img/최종%20목업/신고접수_목록조회(지하주차장).png>)

![신고접수_목록](</img/최종%20목업/신고접수_목록조회(지하차도)_지자체면%20로그인%20상태%20화면만%20추가.png>)

![신고접수_작성](/img/최종%20목업/신고접수%20글쓰기[지하차도]%20-%20비회원.png)

![신고접수_수정](/img/최종%20목업/신고접수%20글쓰기[지하주차장].png)

![신고접수_수정](/img/최종%20목업/신고접수%20글수정[지하차도]%20-%20비회원.png)

![신고접수_목록](/img/최종%20목업/신고접수%20글수정[지하주차장].png)

![신고접수_상세](/img/최종%20목업/신고접수%20글상세[지하차도].png)

![신고접수_상세](/img/최종%20목업/신고접수%20글상세[지하주차장].png)

### 제어

![제어](/img/최종%20목업/[지하차도]%20제어페이지.png)

![제어](</img/최종%20목업/[아파트%20관리인]%20제어페이지%20(지하주차장).png>)

### 시스템 로그

![시스템로그](/img/최종%20목업/[아파트%20관리자]%20-%20시스템%20로그%20조회%20화면-1.png)

![시스템로그](/img/최종%20목업/[지자체%20관리자]%20-%20시스템%20로그%20조회%20화면-1.png)

![시스템로그](/img/최종%20목업/[지자체%20관리자]%20-%20시스템%20로그%20조회%20화면.png)

![시스템로그](/img/최종%20목업/[아파트%20+%20지자체%20관리자]%20-%20시스템%20로그%20조회%20화면-1.png)

![시스템로그](/img/최종%20목업/[아파트%20+%20지자체%20관리자]%20-%20시스템%20로그%20조회%20화면-2.png)

### 관리

![관리](</img/최종%20목업/관리페이지%20(지하차도).png>)

![관리](/img/최종%20목업/관리페이지%20-%20메시지/)

![관리](/img/최종%20목업/관리페이지%20-%20입주민%20관리%20[지하주차장].png)

### 로그인 & 회원가입

![로그인](/img/최종%20목업/로그인_ver1.png)

![로그인](/img/최종%20목업/로그인_ver2.png)

![로그인](/img/최종%20목업/로그인_ver3.png)

![로그인](/img/최종%20목업/로그인_ver4.png)

![회원가입](/img/최종%20목업/회원가입_약관동의%20화면.png)

![회원가입](/img/최종%20목업/회원가입_회원정보%20입력-1.png)

![회원가입](/img/최종%20목업/회원가입_회원정보%20입력.png)

### 알림함

![알림함](/img/최종%20목업/[아파트%20관리인]%20알림함.png)

# **2023-07-24**

## 스크럼회의(2023/07/24)

### 오늘의 할 일

**오전**
- 목업 마무리
- ERD 수정
- JIRA 스프린트
- 마일스톤

**오후**
- API 명세

<br>

### IoT 관련

- 구매한 센서 모두 배송 완료

- 배송이 급하다고 생각해서 추가적인 상의 없이 구매해서 죄송함다.. 조만간 정산 및 영수증 첨부해서 알리도록 하겠슴다..

- DB 수정 제안
    1. Client (라즈베리 파이) 저장 테이블
    - Springboot와 라즈베리 파이 사이의 통신은 Springboot에서 라즈베리파이의 ip를 지정하고 보내는 방식임.
    - 따라서 지하 차도/지하 주차장 각각이 하나의 라즈베리 파이가 되고, 각 ip를 지정하는 테이블을 만드는 것이 어떤가 싶음.
    - 하나의 wifi에서 다수의 라즈베리파이는 확인한 상태
    - 다수의 wifi에서 다수의 라즈베리 파이는 포트포워딩으로 가능할 것으로 보임(확인 필요)
    
    ```java
    // 라즈베리 파이의 주소
    private String broker = "tcp://192.168.25.61:1883";
    private String clientId = "test";
    
        public MqttPublisher() {
            try {
                // 클라이언트 생성
                client = new MqttClient(broker, clientId);
                // 브로커 접속
                client.connect();
            } catch (MqttException e) {
                e.printStackTrace();
            }
        }
    ```
    
    2. 시설 - 알림설정 테이블 병합 결정

<br>

# Vue 컴포넌트 구조 설계

```jsx
/src
	// 공통
	- common/
		- components/
			- TheHeader // 헤더(로고, 메뉴선택, 지역선택)
			- TheFooter // 하단 
		- views/
			- startPageView // 초기화면

	// 지하차도
	- underroad/ 
		- components/
			- dashboard/             // 대시보드
				- roadDashRealTimeVideo    // 실시간 영상
				- roadDashRainFallAmount   // 강수량 그래프
				- roadDashWaterLevelHeight // 수위센서 높이
				- roadDashReportList       // 신고접수 내역
				- roadDashNearUnderroad    // 주변 지하차도
				- roadDashWarningMessage   // 경고메시지
			- report/                // 신고접수
				- roadReportList           // 신고접수 목록
				- roadReportListItem       // 신고접수 상세
				- roadCreateReport         // 신고접수 작성
			- control/               // 제어
				- roadRealTimeVideo        // 실시간 영상
				- roadLedBoardControl      // LED 전광판 제어
				- roadWarningLightControl  // 경고등 제어
			- systemLog/             // 시스템 로그
				- roadSensorMeasureLog     // 센서 측정로그
				- roadDeviceStatusLog      // 기기 상태로그
				- roadDeviceControlLog     // 기기 제어로그
			- manage/                // 관리
				- roadMessageAndValueCustom // 메시지,기준치 설정
		- views/
				- roadDashboardView    // 대시보드
				- roadReportView       // 신고접수
				- roadControlView      // 제어
				- roadSystemLogView    // 시스템 로그
				- roadManageView       // 관리
				- roadMypageView       // 마이페이지
				- roadAlarmView        // 알림함
				- roadLoginView        // 로그인
				- roadSignupView       // 회원가입
				

	//지하주차장
	- undergroundParkingLot/ 
		- components/
			- dashboard/             // 대시보드
				- parkDashRealTimeVideo    // 실시간 영상
				- parkDashRainFallAmount   // 강수량 그래프
				- parkDashWaterLevelHeight // 수위센서 높이
				- parkDashReportList       // 신고접수 내역
				- parkDashTempAndHumid     // 온습도
				- parkDashDust             // 미세먼지
				- parkDashWarningMessage   // 경고메시지
			- report/                // 신고접수
				- parkReportList           // 신고접수 목록
				- parkReportListItem       // 신고접수 상세
				- parkCreateReport         // 신고접수 작성
			- control/               // 제어
				- parkRealTimeVideo        // 실시간 영상
				- parkWaterPlateControl    // 차수판 제어
				- parkSirenControl         // 사이렌 제어
			- systemLog/             // 시스템 로그
				- parkSensorMeasureLog     // 센서 측정로그
				- parkDeviceStatusLog      // 기기 상태로그
				- parkDeviceControlLog     // 기기 제어로그
			- manage/                // 관리
				- parkMessageAndValueCustom // 메시지,기준치 설정
				- parkResidentList          // 입주민 조회

		- views/
				- parkDashboardView    // 대시보드
				- parkReportView       // 신고접수
				- parkControlView      // 제어
				- parkSystemLogView    // 시스템 로그
				- parkManageView       // 관리
				- parkMypageView       // 마이페이지
				- parkAlarmView        // 알림함
				- parkLoginView        // 로그인
				- parkSignupView       // 회원가입
```

- 지하차도와 지하주차장을 큰 디렉토리로 나누는게 좋은가
    - 공통되는 부분이 너무 많아서 나누지 말자?
    - 각 컴포넌트에서 v-if 쓰는 편이 더 간단할지
    
    ⇒ 대시보드는 꼭 나눌 필요가 있다고 생각합니다. (대시보드 각 컴포넌트별로 크기가 달라질 수 있기 때문(특히 지도) ) 
    
    ⇒ 최대한 덜 헷갈릴 수 있도록 코드는 서로 비슷하게 하더라도 따로 파일을 만드는게 좋지 않을까 싶습니다(의견의견)
    

⇒ **지하차도 / 지하주차장 분리**

<br>

## views/ 목록

- 초기화면 ( 서비스 선택하는 )
    - startPageView
- 대시보드
    - dashboardView
- 신고접수
    - reportView
- 제어
    - controlView
- 시스템 로그
    - systemLogView
- 관리
    - manageView
- 마이페이지
    - myPageView
- 알림함
    - alarmView
- 로그인
    - loginView
    
    ⇒ 모달은 어떤가요? ! (그냥 의견입니당!!!! 아니면 이건 일단 구현하다가 결정해도 괜찮을 것 같아요 ) 근데 모달로 하면 모든 페이지마다 모달 코드를 넣어야해서 그냥 화면 하나 만드는게 더 편할 것 같기도 하네요 ,,,,
    
- 회원가입
    - signUpView
    
    ⇒ 모달은 어떤가요? ! (그냥 의견!!!! 아니면 이건 일단 구현하다가 결정해도 괜찮을 것 같아요 )
    

⇒ **구현해보고 모달로 할지 말지 정하기**

<br>

## components/ 목록

### common/ (공통)

- 로고
    - TheLogo
- 상단 헤더
    - TheHeader
- 메뉴 선택
    - TheMenuSelect
- 지역 선택
    - TheRegionSelect
    
    ⇒  노란색으로 칠한 얘네는 하나의 헤더로 묶어버려도 괜찮지 않을까 싶습니다 !! 
    

⇒ **TheHeader 로 통합**

- 하단
    - TheFooter

### dashboard/ (대시보드)

- 실시간영상
    - realTimeVideo
- 강수량 그래프
    - rainFallAmount
- 수위센서 높이
    - waterLevelHeight
- 신고접수 내역
    - reportList
- 실시간 상황메시지 (차수판 동작 또는 호의경보, 호의주의보 등의 메시지가 들어갈 칸)
    - warningMessage
- 대시보드임을 표기하기위해 맨앞에 dash 를 붙이는건 어떨까요 ? 다른건 다 괜찮은데 실시간 영상과 reportList가 다른 화면의 컴포넌트와 겹쳐서 + 헷갈릴 수 있을 것 같습니다!

### report/ (신고접수)

- 신고접수 글 리스트
    - reportList
- 신고접수 글 하나
    - reportListItem
- 신고접수 글 작성
    - createReport

### control/ (제어)

- 실시간 영상
    - realTimeVideo (공통으로 빼도 되나?)
    - 대시보드와 제어에서 보이는 스타일이(가로 세로, 배경 등) 달라서 따로 구성하는 게 좋을 것 같습니다.
- 전광판 제어
    - ledBoardControl
- 경고등 제어
    - warningLightControl
- 차수판 제어
    - waterPlateControl
- 사이렌 제어
    - sirenControl
- 입주민 알림 전송
    - sendAlarm

### systemLog/ (시스템 로그)

- 센서 측정 로그
    - sensorMeasureLog
- 기기 상태 로그
    - deviceStatusLog
- 기기 제어 로그
    - deviceControlLog

### manage/ (관리)

- 메시지/기준치 설정
    - messageAndValueCustom
- 입주민 조회
    - residentList

<br>

## 프론트 기능분업

- 진입화면 - 황종인 (2)
- 헤더
    - 버튼 구성 및 각 URL로 연결 - 황윤영(3)
- 전체
    - 지하차도 위치 들고다니는 것. 이동 버튼을 눌렀을 때 아래 하단 새로고침 등등으로 해당 지하차도 정보로 바뀌기! - 황종인(3)
- 대시보드
    - CCTV - 황윤영(4)
    - 지도  - 황윤영 ( 지자체버전, 비회원버전) (4)
    - 강수량 그래프  - 황종인 (4)
    - 수위센서 높이 그래프 - 황종인 (4)
    - 신고접수 내역 - 황윤영(2)
    - 미세먼지 조회 - 황종인 (2)
    - 기온 조회 - 황종인(2)
    - 습도 조회- 황종인(2)
    - 날씨 조회 - 황윤영 (2)
    - 차수판 동작 및 기상특보 알림 메시지 - 황윤영(2)
    
- MEMBER
    - 로그인 - 황윤영 (- 로그인 후 아파트 인증코드 꼭 확인하고 없으면 마이페이지로 보낼 것.) (4)
    - 회원가입 - 황윤영 - (4)
    - 로그아웃 - 황윤영 - (1)
    - 아이디 찾기 - 황종인(2)
    - 비밀번호 찾기 - 황종인(2)
    - 마이페이지 조회 - 황종인(3)
    - 마이페이지 수정 - 황종인(4)
        - 비밀번호 변경
        - 그냥 수정
        - 휴대폰 인증
    - 회원탈퇴 - 황종인(1)
- 신고접수
    - 목록 조회 - 황윤영 (2)
    - 상세 조회 - 황종인(1)
    - 글쓰기 + 등록 - 황종인(2)
    - 글 수정 - 황종인(2)
    - 글 삭제 - 황종인(1)
- 제어
    - CCTV 조회 -황윤영(4)
    - 차수판 제어 - 황윤영(1)
    - 사이렌 제어- 황윤영(1)
    - 전광판 제어 - 황윤영(1)
    - 경고등 제어 - 황윤영(1)
- 시스템로그
    - 센서 측정 로그 조회 - 황윤영(4)
        - 날짜필터
        - 센서 종류 필터
    - 기기 상태 로그 조회 - 황윤영 (4)
        - 날짜 필터
    - 기기 제어 로그 조회 - 황윤영(4)
        - 날짜 필터
    - 알림 로그 조회
        - SMS/웹 - 황종인 (4)
            - 날짜필터
            - 신고접수 / 차수판 동작관련 필터
        - 시스템 경고 - 황종인(4)
            - 날짜 필터
            - 1차 / 2차 필터
- 알림함 - 황종인(4)
    - 수신 웹 알림내역 조회 -
        - 읽음 안읽음 구분 (안읽음은 상단 정렬 및 굵게 표시)
            - 시스템 알림
            - 신고접수 알림
- 관리
    - 메시지/기준치 설정 - 황윤영(2)
    - 입주민 조회 - 황윤영(3)
        - 검색기능(호수/이름)
    - 입주민 삭제 버튼 클릭 시 권한 삭제 - 황윤영(1)

<br>

## JIRA 스프린트 작성

![백로그1](/uploads/ec0678a4c6821e22f2518006dab727d8/백로그1.PNG)

![백로그2](/uploads/d42b803cf3a3cdb6c5da329af6b6e6e5/백로그2.PNG)

![백로그3](/uploads/1496d7bcda89bb5132a6fd7bff068537/백로그3.PNG)

![백로그4](/uploads/28edc7efa4e8da8e2f75f0ee4b936f70/백로그4.PNG)

![스프린트](/uploads/2c87cdc810de16adf7a5237541200693/스프린트.PNG)

<br>

## API 명세서 작성

![API명세서1](/uploads/df7cb766d46b6007d4764656a1fd1da3/API명세서1.PNG)

![API명세서2](/uploads/fb8ad7a74fa2774969f23aad913b2707/API명세서2.PNG)
